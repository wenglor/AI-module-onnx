services:
  model-export-example:
    build:
      context: .
      dockerfile: Dockerfile
    volumes:
      - ./notebooks:/notebooks
    ports:
      - "8888:8888" # Jypyter inside the container
    restart: unless-stopped
    # Set the user and group ID to match the host, so that files created in the container are owned by the host user
    # default to 1000:1000 if not set, this is the default for the first user on most Linux systems
    user: "${USER_ID:-1000}:${GROUP_ID:-1000}"
    environment:
      - HOME=/notebooks
    working_dir: "/notebooks"
    command: python3 -m jupyter lab --ip 0.0.0.0 --port 8888
    shm_size: "2gb" # PyTorch shared memory